replicaCount: 2

image:
  repository: your-repo/custody-service
  tag: 2.0.0
  pullPolicy: IfNotPresent

imagePullSecrets: []

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations:
  vault.hashicorp.com/agent-inject: "true"
  vault.hashicorp.com/agent-inject-secret-config.env: secret/data/platform/custody-service
  vault.hashicorp.com/role: "custody-service"

podLabels: {}

podSecurityContext:
  fsGroup: 2000

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  capabilities:
    drop:
      - ALL

service:
  type: ClusterIP
  port: 9090
  annotations: {}
  extraPorts: []

resources:
  limits:
    cpu: 500m
    memory: 768Mi
  requests:
    cpu: 250m
    memory: 512Mi

env:
  - name: VAULT_ADDR
    value: http://vault.vault.svc:8200
  - name: MPC_ENDPOINT
    value: https://mpc.your-domain.com
  - name: AUDIT_TOPIC
    value: custody-events
  - name: SIGNING_THRESHOLD
    value: "2"

extraEnvFrom: []

livenessProbe:
  httpGet:
    path: /healthz
    port: grpc
  initialDelaySeconds: 30
  periodSeconds: 15

readinessProbe:
  httpGet:
    path: /ready
    port: grpc
  initialDelaySeconds: 15
  periodSeconds: 10

persistence:
  enabled: true
  size: 5Gi
  storageClass: gp3

metrics:
  enabled: true
  port: 9100

serviceMonitor:
  enabled: true
  interval: 30s
  scrapeTimeout: 10s
  labels: {}

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 6
  targetCPUUtilizationPercentage: 60
  targetMemoryUtilizationPercentage: 70

nodeSelector: {}

tolerations: []

affinity: {}

networkPolicy:
  enabled: true
  ingress:
    - from:
        - namespaceSelector:
            matchLabels:
              platform: web3
      ports:
        - protocol: TCP
          port: 9090
    - from:
        - namespaceSelector:
            matchLabels:
              component: monitoring
      ports:
        - protocol: TCP
          port: 9100
  egress:
    - to:
        - namespaceSelector:
            matchLabels:
              kubernetes.io/metadata.name: vault
      ports:
        - protocol: TCP
          port: 8200
